<section class="relative lg:grid lg:place-content-center">
  <button
    class="font-family-regular flex w-fit items-center justify-center gap-2 rounded-xl bg-white p-2 text-sm tracking-[0.5px] shadow-sm"
    (click)="openFilterDialog($event)"
  >
    <svg
      width="17"
      height="17"
      viewBox="0 0 21 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M3.42969 15.9941C3.42969 15.6317 3.7235 15.3379 4.08594 15.3379H9.74943C10.1119 15.3379 10.4057 15.6317 10.4057 15.9941C10.4057 16.3566 10.1119 16.6504 9.74943 16.6504H4.08594C3.7235 16.6504 3.42969 16.3566 3.42969 15.9941Z"
        fill="black"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M13.3618 13.67C13.9286 13.1034 14.757 12.957 15.6862 12.957C16.6154 12.957 17.4439 13.1034 18.0106 13.67C18.5774 14.2367 18.724 15.0652 18.724 15.9949C18.724 16.9245 18.5774 17.753 18.0106 18.3197C17.4439 18.8864 16.6154 19.0327 15.6862 19.0327C14.757 19.0327 13.9286 18.8864 13.3618 18.3197C12.7949 17.753 12.6484 16.9245 12.6484 15.9949C12.6484 15.0652 12.7949 14.2367 13.3618 13.67ZM14.2898 14.5982C14.1122 14.7757 13.9609 15.138 13.9609 15.9949C13.9609 16.8517 14.1122 17.2141 14.2898 17.3915C14.4673 17.569 14.8296 17.7202 15.6862 17.7202C16.5428 17.7202 16.9051 17.569 17.0827 17.3915C17.2602 17.2141 17.4115 16.8517 17.4115 15.9949C17.4115 15.138 17.2602 14.7757 17.0827 14.5982C16.9051 14.4207 16.5428 14.2695 15.6862 14.2695C14.8296 14.2695 14.4673 14.4207 14.2898 14.5982Z"
        fill="black"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M11.75 6.81641C11.75 6.45397 12.0438 6.16016 12.4062 6.16016H18.0689C18.4314 6.16016 18.7251 6.45397 18.7251 6.81641C18.7251 7.17885 18.4314 7.47266 18.0689 7.47266H12.4062C12.0438 7.47266 11.75 7.17885 11.75 6.81641Z"
        fill="black"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M4.14317 4.49061C4.71001 3.92391 5.53857 3.77734 6.46828 3.77734C7.39766 3.77734 8.22604 3.92393 8.79276 4.49067C9.35949 5.05741 9.50614 5.88578 9.50614 6.81516C9.50614 7.74484 9.35958 8.57331 8.79276 9.14C8.22592 9.70665 7.39749 9.85295 6.46828 9.85295C5.53875 9.85295 4.71013 9.70665 4.14323 9.14009C3.57623 8.57337 3.42969 7.74483 3.42969 6.81516C3.42969 5.88579 3.57627 5.05735 4.14317 4.49061ZM5.07113 5.41881C4.89349 5.59639 4.74219 5.95874 4.74219 6.81516C4.74219 7.67205 4.89353 8.0343 5.07106 8.21174C5.24869 8.38928 5.61125 8.54048 6.46828 8.54048C7.32486 8.54048 7.68721 8.3893 7.86476 8.2118C8.04226 8.03434 8.1936 7.67204 8.1936 6.81516C8.1936 5.95875 8.04229 5.59635 7.86469 5.41875C7.6871 5.24114 7.32469 5.08984 6.46828 5.08984C5.61143 5.08984 5.24881 5.24117 5.07113 5.41881Z"
        fill="black"
      />
    </svg>
    Filtrar
  </button>
  <div
    class="relative mt-10 h-[550px] w-full lg:mt-0 lg:h-[680px] lg:w-[482px]"
  >
    @for (profile of profiles; track $index) {
      <div
        class="card absolute z-1 flex h-full w-full flex-col justify-between px-2 py-15 text-white lg:p-5"
      >
        <article
          id="pop_info_{{ $index }}"
          class="font-family-medium absolute top-25 left-4 z-30 hidden flex-col gap-5 rounded-4xl bg-white p-5 text-black"
        >
          <h2>{{ profile.bio }}</h2>
          <h2 class="font-family-semibold text-2xl">Intereses:</h2>
          <ul class="flex gap-5">
            <li>{{ profile.labels.first_label.name }}</li>
            <li>{{ profile.labels.second_label.name }}</li>
            <li>{{ profile.labels.third_label.name }}</li>
            <li>{{ profile.labels.fourth_label.name }}</li>
            <li>{{ profile.labels.fifth_label.name }}</li>
          </ul>
        </article>
        <!-- Capa con la imagen de fondo enmascarada -->
        <div class="mask-custom-shape absolute inset-0 overflow-hidden">
          <div class="swiper h-full w-full" id="swiper-{{ $index }}">
            <div class="swiper-wrapper">
              <!-- Imagen principal del perfil -->
              @if (imagenes[$index] && imagenes[$index].length > 0) {
                <div class="swiper-slide">
                  <img
                    class="absolute top-0 left-0 h-full w-full object-cover"
                    [src]="imagenes[$index][0].image_1 || ''"
                    alt="{{ profile.first_name }} {{ profile.last_name }}"
                  />
                </div>

                <!-- Imágenes adicionales del perfil -->
                <div class="swiper-slide">
                  <img
                    class="absolute top-0 left-0 h-full w-full object-cover"
                    [src]="imagenes[$index][0].image_2 || ''"
                    alt="{{ profile.first_name }} {{ profile.last_name }}"
                  />
                </div>

                @if (imagenes[$index][0].image_3) {
                  <div class="swiper-slide">
                    <img
                      class="absolute top-0 left-0 h-full w-full object-cover"
                      [src]="imagenes[$index][0].image_3 || ''"
                      alt="{{ profile.first_name }} {{ profile.last_name }}"
                    />
                  </div>
                }
                @if (imagenes[$index][0].image_4) {
                  <div class="swiper-slide">
                    <img
                      class="absolute top-0 left-0 h-full w-full object-cover"
                      [src]="imagenes[$index][0].image_4 || ''"
                      alt="{{ profile.first_name }} {{ profile.last_name }}"
                    />
                  </div>
                }
                @if (imagenes[$index][0].image_5) {
                  <div class="swiper-slide">
                    <img
                      class="absolute top-0 left-0 h-full w-full object-cover"
                      [src]="imagenes[$index][0].image_5 || ''"
                      alt="{{ profile.first_name }} {{ profile.last_name }}"
                    />
                  </div>
                }
              } @else {
                <div class="swiper-slide">
                  <img
                    class="absolute top-0 left-0 h-full w-full object-cover"
                    src="assets/images/default-profile.jpg"
                    alt="{{ profile.first_name }} {{ profile.last_name }}"
                  />
                </div>
              }
            </div>
          </div>
        </div>
        <div class="mask-custom-shape absolute inset-0 overflow-hidden">
          <div
            class="absolute bottom-0 h-64 w-full bg-gradient-to-b from-transparent to-black/80"
          ></div>
          <div
            class="absolute top-0 h-40 w-full bg-gradient-to-t from-transparent to-black/50"
          ></div>
        </div>
        <!-- --------------------------------------- -->
        <div class="relative z-10 flex p-3.5 select-none">
          <div
            id="counter-{{ $index }}"
            class="font-family-light flex text-4xl tracking-[1.5px]"
          >
            <span class="text-white">1</span>
            @if (imagenes[$index][0].image_3 == null) {
              <span class="mt-1 text-white/40">/2</span>
            } @else if (imagenes[$index][0].image_4 == null) {
              <span class="mt-1 text-white/40">/3</span>
            } @else if (imagenes[$index][0].image_5 == null) {
              <span class="mt-1 text-white/40">/4</span>
            } @else {
              <span class="mt-1 text-white/40">/5</span>
            }
          </div>
          <button
            class="ml-80 cursor-pointer rounded-2xl bg-white"
            (click)="displayPopInfo($index)"
          >
            <img src="assets/icons/menu-icon.svg" alt="" class="w-12" />
          </button>
        </div>
        <div class="relative z-10 flex flex-col gap-4">
          <!-- Contenido del artículo -->
          <article class="p-1.5 select-none">
            <div
              class="flex w-fit items-center justify-center gap-1.5 rounded-full bg-black/40 px-4 py-2.5 text-sm backdrop-blur-[10px]"
            >
              <span class="h-[8px] w-[8px] rounded-full bg-[#1ECF64]"></span>
              <span class="font-family-regular tracking-[0.6px]">Activo</span>
            </div>
            <h3
              class="font-family-regular mb-3 flex flex-col text-5xl tracking-[2px]"
            >
              <span>{{ profile.first_name }}</span>
              <span
                >{{ profile.last_name }},
                {{ calcularEdad(profile.birthdate) }}</span
              >
            </h3>
            <div class="flex gap-2.5">
              <span
                class="font-family-light flex w-fit items-center gap-2 rounded-full bg-white/19 px-3 py-2 text-sm tracking-[1.1px] backdrop-blur-[20px]"
              >
                <svg
                  width="16"
                  height="18"
                  viewBox="0 0 16 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M7.99923 9.6625C9.304 9.6625 10.3617 8.60477 10.3617 7.3C10.3617 5.99523 9.304 4.9375 7.99923 4.9375C6.69446 4.9375 5.63672 5.99523 5.63672 7.3C5.63672 8.60477 6.69446 9.6625 7.99923 9.6625Z"
                    stroke="white"
                    stroke-width="1.2"
                    stroke-miterlimit="10"
                    stroke-linecap="round"
                  />
                  <path
                    d="M15 7.69375C15 12.025 9.645 16.75 8 16.75C6.355 16.75 1 12.4188 1 7.69375C1 4.00125 4.1325 1 8 1C11.8675 1 15 4.00125 15 7.69375Z"
                    stroke="white"
                    stroke-width="1.2"
                    stroke-miterlimit="10"
                    stroke-linecap="round"
                  />
                </svg>
                España, {{ profile.province.name }}
              </span>
              @if (profile.gender.name != "Prefiero no decirlo") {
                <span
                  class="font-family-light flex w-fit items-center gap-1.5 rounded-full bg-white/19 px-3 py-2 text-sm tracking-[1.1px] backdrop-blur-[20px]"
                >
                  @switch (profile.gender.name) {
                    @case ("Hombre") {
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 16 16"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M6.46778 15C9.48555 15 11.9356 12.55 11.9356 9.53221C11.9356 6.51443 9.48555 4.06445 6.46778 4.06445C3.45 4.06445 1 6.51443 1 9.53221C1 12.55 3.45 15 6.46778 15Z"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-miterlimit="10"
                          stroke-linecap="round"
                        />
                        <path
                          d="M14.9987 1L10.3398 5.66667"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-miterlimit="10"
                          stroke-linecap="round"
                        />
                        <path
                          d="M11.5 1H15V4.5"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                      </svg>
                    }
                    @case ("Mujer") {
                      <svg
                        width="13"
                        height="19"
                        viewBox="0 0 13 19"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M6.5 12.0184C9.54333 12.0184 12 9.55251 12 6.50918C12 3.46584 9.54333 1 6.5 1C3.45667 1 1 3.46584 1 6.50918C1 9.55251 3.45667 12.0184 6.5 12.0184Z"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-miterlimit="10"
                          stroke-linecap="round"
                        />
                        <path
                          d="M6.5 12.0078V17.5078"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-miterlimit="10"
                          stroke-linecap="round"
                        />
                        <path
                          d="M4.56641 15.6758H8.33389"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-miterlimit="10"
                          stroke-linecap="round"
                        />
                      </svg>
                    }
                    @case ("No binario") {
                      <svg
                        width="13"
                        height="13"
                        viewBox="0 0 13 13"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M6.5 12.0184C9.54333 12.0184 12 9.55251 12 6.50918C12 3.46584 9.54333 1 6.5 1C3.45667 1 1 3.46584 1 6.50918C1 9.55251 3.45667 12.0184 6.5 12.0184Z"
                          stroke="white"
                          stroke-width="1.2"
                          stroke-miterlimit="10"
                          stroke-linecap="round"
                        />
                      </svg>
                    }
                  }
                  {{ profile.gender.name }}
                </span>
              }
            </div>
            <p
              class="font-family-light mt-5 ml-1 line-clamp-2 overflow-hidden text-base tracking-[1.1px] text-ellipsis text-white"
            >
              {{ profile.bio }}
            </p>
          </article>
          <!-- --------------------------------------- -->
          <div>
            <div class="relative flex justify-between">
              <!-- Forma de fondo -->
              <div
                class="absolute top-0 left-0 mt-3.5 ml-3.5 h-[52px] w-[62px] rounded-[94px] bg-[#939393c2]"
              ></div>
              <button
                (click)="handleDislike(profile, $event)"
                class="flex h-[98px] w-[145px] items-center justify-center rounded-[503px] bg-black/50 backdrop-blur-[20px]"
              >
                <svg
                  width="32"
                  height="32"
                  viewBox="0 0 32 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1 1L31.1705 31.1641"
                    stroke="white"
                    stroke-width="2"
                  />
                  <path
                    d="M31.1705 1L1 31.1641"
                    stroke="white"
                    stroke-width="2"
                  />
                </svg>
              </button>
              <button
                class="flex h-[98px] w-[124px] items-center justify-center rounded-[50px] bg-white"
              >
                <svg
                  width="32"
                  height="37"
                  viewBox="0 0 32 37"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.9938 6.74492C12.4938 6.29492 14.1625 6.01367 16 6.01367C24.2875 6.01367 31 12.67 31 20.8825C31 29.095 24.2875 35.7512 16 35.7512C7.7125 35.7512 1 29.095 1 20.8825C1 17.8262 1.93745 14.9762 3.53121 12.6137"
                    stroke="black"
                    stroke-width="2"
                    stroke-linecap="square"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M13.6578 2L10.5078 6.85625L15.4015 10.0063"
                    stroke="black"
                    stroke-width="2"
                    stroke-linecap="square"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
              <button
                (click)="handleLike(profile, $event)"
                class="flex h-[98px] w-[145px] items-center justify-center rounded-[50px] bg-[#7948FF]"
              >
                <svg
                  width="38"
                  height="34"
                  viewBox="0 0 38 34"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M19 33C13.78 31.24 1 23.5 1 11C1 5.48 5.48 1 11 1C14.28 1 17.18 2.58 19 5C20.82 2.56 23.74 1 27 1C32.52 1 37 5.46 37 11C37 23.52 24.22 31.24 19 33Z"
                    stroke="black"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    }
    <div
      class="font-family-regular absolute h-full w-full p-5 text-base tracking-[0.5px] text-gray-400 select-none"
    >
      <div
        class="mask-custom-shape absolute inset-0 flex items-center justify-center overflow-hidden bg-gray-200"
      >
        <span>No hay más perfiles</span>
      </div>
    </div>
  </div>
</section>
